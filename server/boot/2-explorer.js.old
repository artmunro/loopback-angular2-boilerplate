var basicAuth = require('loopback').basicAuth;

module.exports = function mountLoopBackExplorer(server, cb) {
    var explorer;
    try {
        explorer = require('loopback-component-explorer');
    } catch (err) {
        // Print the message only when the app was started via `server.listen()`.
        // Do not print any message when the project is used as a component.
        server.once('started', function(baseUrl) {
            console.log(
                'Run `npm install loopback-component-explorer` to enable the LoopBack explorer'
            );
        });

        return;
    }

    server.use('/explorer', basicAuth('user', 'password'));
    explorer(server, {
        apiInfo: {
            'title': 'My API',
            'description': 'Explorer example app.'
        },
        version: '0.1-unreleasable'
    });

    cb();
};
